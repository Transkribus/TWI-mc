b{% extends 'sandbox/base.html' %}
{% load static %}
{% block styles %}
<style>
 * {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
 }

 html, body {
   height: 100%;
 }

 body {
   overflow: hidden;
 }

 main {

   width: 100%;
   height: 100%;

   overflow: auto;
   background-color: #333;

 }

 .viewport {
   box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
 }

 .zoom {
   position: fixed;
   left: 50%;
   top: 0;
   transform: translate(-50%, 0);
 }

</style>
{% endblock %}
{% block content %}
<main class="js-main">
  <section class="view js-view">
    <svg class="viewport js-svg" viewBox="0 0 2802 4049" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xmlns:xlink="http://www.w3.org/1999/xlink">
      <image class="image js-image" x="0" y="0" width="100%" height="100%" xlink:href="/static/sandbox/data/page.jpeg"/>
    </svg>
  </section>
</main>
<aside class="zoom js-zoom">
  <button value="in">&plus;</button>
  <button value="out">&minus;</button>
  <button value="reset">100%</button>
</aside>
{% endblock %}
{% block scripts %}
<script src="{% static 'sandbox' %}/js/zoom-demos.js"></script>
<script>
 window.addEventListener('load', function (evt) {

   var svgNode = document.querySelector('.js-svg');
   var zoomNode = document.querySelector('.js-zoom');
   var mainNode = document.querySelector('.js-main');
   var viewNode = document.querySelector('.js-view');

   Array.from(zoomNode.children).forEach(function (node) {
     node.addEventListener('click', function (evt) {

       var node = evt.target;

       if (node.nodeName === 'BUTTON') {
         if (node.value === 'in')
           handleZoom(1);
         else if (node.value === 'out')
           handleZoom(-1);
         else
           handleZoom(0)
       }

     }, false);
   });

   function handleZoom (delta) {

     if (delta === 0)
       viewNode.style.width = '100%';

     var width = viewNode.offsetWidth;
     viewNode.style.width = Math.round((1 + delta * .25) * width) + 'px';
   }

 }, false);
</script>
{% endblock %}
